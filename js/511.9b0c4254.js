"use strict";(self["webpackChunkkdc_demo"]=self["webpackChunkkdc_demo"]||[]).push([[511],{500:function(e,l,a){a.d(l,{Z:function(){return o}});var t=a(610);const o=e=>{0==e.code?(0,t.z8)({message:e.message,type:"success"}):-1==e.code&&(0,t.z8)({message:e.message,type:"error"})}},3511:function(e,l,a){a.r(l),a.d(l,{default:function(){return $}});var t=a(6252);const o=e=>((0,t.dD)("data-v-36784b0a"),e=e(),(0,t.Cn)(),e),i={class:"tips"},n=(0,t.Uk)("新增设备"),s=(0,t.Uk)("设备查询"),d=(0,t.Uk)("移出"),r={id:"alert"},u=o((()=>(0,t._)("p",null,"警告",-1))),c=o((()=>(0,t._)("p",null,"点击移出后，当前数据将被删除，是否继续???",-1))),m={class:"btn"},p=(0,t.Uk)("确定"),_=(0,t.Uk)("返回");function g(e,l,a,o,g,b){const f=(0,t.up)("upload"),w=(0,t.up)("el-icon"),h=(0,t.up)("el-button"),k=(0,t.up)("Search"),v=(0,t.up)("el-table-column"),V=(0,t.up)("el-table"),C=(0,t.up)("el-pagination"),W=(0,t.up)("el-dialog"),y=(0,t.up)("init"),U=(0,t.up)("search"),x=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t.Wm)(h,{onClick:o.addDevice,type:"primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f)])),_:1}),n])),_:1},8,["onClick"]),(0,t.Wm)(h,{onClick:o.deviceSearch,type:"success"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k)])),_:1}),s])),_:1},8,["onClick"])]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(V,{data:e.tableData,border:"","empty-text":"暂无数据",style:{width:"100%"},stripe:"","header-cell-style":{background:"#f7f7f7",color:"#1f6aa1"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{prop:"Id",label:"序号"}),(0,t.Wm)(v,{prop:"Name",label:"终端序列号"}),(0,t.Wm)(v,{prop:"name",label:"终端名称"}),(0,t.Wm)(v,{prop:"Date",label:"初始化时间"}),(0,t.Wm)(v,{label:"操作"},{default:(0,t.w5)((e=>[(0,t.Wm)(h,{size:"small",type:"danger",onClick:l=>o.confirm(e.$index,e.row)},{default:(0,t.w5)((()=>[d])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[x,e.loading]]),(0,t.Wm)(C,{class:"pagination",background:"",layout:"prev, pager, next",total:e.total,"page-size":e.size,onCurrentChange:o.current,onPrevClick:o.prev,onNextClick:o.next},null,8,["total","page-size","onCurrentChange","onPrevClick","onNextClick"]),(0,t.Wm)(W,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[0]||(l[0]=l=>e.dialogVisible=l),width:"600px","before-close":o.handleClose},{default:(0,t.w5)((()=>[(0,t._)("div",r,[u,c,(0,t._)("div",m,[(0,t.Wm)(h,{type:"primary",onClick:o.moveOut},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"]),(0,t.Wm)(h,{onClick:o.handleClose},{default:(0,t.w5)((()=>[_])),_:1},8,["onClick"])])])])),_:1},8,["modelValue","before-close"]),(0,t.Wm)(y,{dialogVisible:e.init_show,onBackInit:o.backInit},null,8,["dialogVisible","onBackInit"]),(0,t.Wm)(U,{dialogVisible:e.search_show,onSearch:o.search,onBack:o.back},null,8,["dialogVisible","onSearch","onBack"])],64)}var b=a(2262),f=a(3745);const w=e=>((0,t.dD)("data-v-500fd98c"),e=e(),(0,t.Cn)(),e),h={class:"init"},k=w((()=>(0,t._)("p",null,"秘钥输入格式 eg：AE 78 2F",-1))),v={class:"btn"},V=(0,t.Uk)("初始化"),C=(0,t.Uk)("返回");function W(e,l,a,o,i,n){const s=(0,t.up)("el-input"),d=(0,t.up)("el-form-item"),r=(0,t.up)("el-form"),u=(0,t.up)("el-button"),c=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(c,{modelValue:a.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>a.dialogVisible=e),width:"600px",draggable:"",title:"新增设备","before-close":o.handleClose},{default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t.Wm)(r,{"label-position":"left","label-width":"100px",style:{"max-width":"560px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"设备序列号:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.serial_num,"onUpdate:modelValue":l[0]||(l[0]=l=>e.serial_num=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"设备名称:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.device,"onUpdate:modelValue":l[1]||(l[1]=l=>e.device=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"设置秘钥:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.secret_key,"onUpdate:modelValue":l[2]||(l[2]=l=>e.secret_key=l)},null,8,["modelValue"]),k])),_:1})])),_:1}),(0,t._)("div",v,[(0,t.Wm)(u,{type:"primary",onClick:o.init},{default:(0,t.w5)((()=>[V])),_:1},8,["onClick"]),(0,t.Wm)(u,{onClick:o.handleClose},{default:(0,t.w5)((()=>[C])),_:1},8,["onClick"])])])])),_:1},8,["modelValue","before-close"])}var y=a(610),U=a(500),x={props:["dialogVisible"],emits:["backInit"],setup(e,{emit:l}){const a=JSON.parse(sessionStorage.getItem("userInfo")),t=(0,b.iH)(!1),o=(0,b.qj)({serial_num:"",device:"",secret_key:"",user_id:a.user_id}),i=()=>{l("backInit"),o.device="",o.serial_num="",t.value=!1},n=async()=>{t.value=!0;const e=await f.Z.send(o);t.value=!1,"string"==typeof e?(0,y.z8)({message:e,type:"error"}):(0,U.Z)(e.data),i()};return{...(0,b.BK)(o),handleClose:i,init:n,loading:t}}},I=a(3744);const z=(0,I.Z)(x,[["render",W],["__scopeId","data-v-500fd98c"]]);var S=z;const Z={class:"init"},D={class:"btn"},B=(0,t.Uk)("查询"),N=(0,t.Uk)("返回");function j(e,l,a,o,i,n){const s=(0,t.up)("el-input"),d=(0,t.up)("el-form-item"),r=(0,t.up)("el-form"),u=(0,t.up)("el-button"),c=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(c,{modelValue:a.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=e=>a.dialogVisible=e),width:"600px",title:"设备查询",draggable:"","before-close":o.handleClose},{default:(0,t.w5)((()=>[(0,t._)("div",Z,[(0,t.Wm)(r,{"label-position":"left","label-width":"100px",style:{"max-width":"560px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"设备序列号:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.serial_num,"onUpdate:modelValue":l[0]||(l[0]=l=>e.serial_num=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"设备名称:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.device,"onUpdate:modelValue":l[1]||(l[1]=l=>e.device=l)},null,8,["modelValue"])])),_:1})])),_:1}),(0,t._)("div",D,[(0,t.Wm)(u,{type:"primary",onClick:o.search},{default:(0,t.w5)((()=>[B])),_:1},8,["onClick"]),(0,t.Wm)(u,{onClick:o.handleClose},{default:(0,t.w5)((()=>[N])),_:1},8,["onClick"])])])])),_:1},8,["modelValue","before-close"])}var O={props:["dialogVisible"],emits:["search","back"],setup(e,{emit:l}){const a=JSON.parse(sessionStorage.getItem("userInfo")),t=(0,b.qj)({serial_num:"",device:"",page:1,size:10,user_id:a.user_id}),o=()=>{l("back"),t.serial_num="",t.device=""},i=async()=>{l("search",t),o()};return{...(0,b.BK)(t),handleClose:o,search:i}}};const q=(0,I.Z)(O,[["render",j],["__scopeId","data-v-1f9fa918"]]);var H=q,J=a(6907),K=a(8957);const L=(0,t.aZ)({name:"Upload"}),P={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},A=(0,t._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1),E=[A];function F(e,l,a,o,i,n){return(0,t.wg)(),(0,t.iD)("svg",P,E)}var M=(0,K.Z)(L,[["render",F]]),Q={components:{init:S,search:H,Search:J.Z,Upload:M},setup(e){const l=(0,b.qj)({tableData:[],page:1,size:10,total:null,init_show:!1,dialogVisible:!1,search_show:!1,row:"",loading:!0}),a=JSON.parse(sessionStorage.getItem("userInfo")),o={serial_num:"",device:"",page:l.page,size:l.size,user_id:a.user_id},i=async e=>{const{data:a}=await f.Z.deviceSearch(e);a&&(l.loading=!1),l.tableData=a.data.all_cur_name,l.total=a.total_count},n=e=>{o.page=e,i(o)},s=e=>{o.page=e,i(o)},d=e=>{o.page=e,i(o)};(0,t.bv)(i(o));const r=e=>{i(e)},u=()=>{l.init_show=!0},c=()=>{l.search_show=!0},m=()=>{l.dialogVisible=!1},p=()=>{l.search_show=!1},_=()=>{l.init_show=!1,i(o)},g=async(e,a)=>{const{data:t}=await f.Z.kdcOut({serial_num:l.row.Name,device:l.row.name});(0,U.Z)(t),i(o),m()},w=(e,a)=>{l.dialogVisible=!0,l.row=a};return{...(0,b.BK)(l),addDevice:u,deviceSearch:c,back:p,getList:i,backInit:_,moveOut:g,confirm:w,handleClose:m,search:r,current:n,prev:s,next:d}}};const Y=(0,I.Z)(Q,[["render",g],["__scopeId","data-v-36784b0a"]]);var $=Y}}]);